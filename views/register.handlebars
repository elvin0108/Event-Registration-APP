<div class="container">
    <div class="header-text">
        <div>
            <h1>શ્રી આરૂણી શૈક્ષણીક સંકુલ - સાણથલી</h1>
        </div>
        <div>
            <h2>જ્ઞાનોત્સવ - ૨૦૨૪</h2>
        </div>
    </div>
    
        <div>
            {{#if successMessage}}
            <div class="success-message" id="successMessage">{{ successMessage }}</div>
            <div class="name-display" id="name-display" style="display:none">{{name}}</div>
            <script>
                setTimeout(function () {
                    document.getElementById('successMessage').style.display = 'none';
                    var name = document.getElementById('name-display').innerHTML;
                    console.log(name);
                    openWhatsApp({{mobile}}, name);
                }, 1000);
            </script>
            {{/if}}

            {{#if errorMessage}}
            <div class="error-message" id="errorMessage">{{ errorMessage }}</div>
            <script>
                setTimeout(function () {
                    document.getElementById('errorMessage').style.display = 'none';
                }, 1000);
            </script>
            {{/if}}
        </div>
    <div class="main-section">
        <form action="/register" method="post" autocomplete="off">
            <div class="header">
                <img src="https://i.pinimg.com/736x/51/a6/6c/51a66cf417d2a933d1fa1b86cbc9f32f.jpg" class="logo">
            </div>
            <label for="username">Name:</label>
            <input type="text" id="username" name="username" required>
            <br>
            <label for="village">Village:</label>
            <input type="text" id="village" name="village" required>
            <br>
            <br>
            <label for="std">Standard:</label>
            <input type="text" id="std" name="std" required>
            <br>
            <div class="userType">
                <div class="userType-student">
                    <input type="radio" id="student" name="category" value="Student" required onchange="toggleSchoolDropdown()">
                    <label for="student">Student</label>
                </div>
                <div class="userType-parent">
                    <input type="radio" id="parent" name="category" value="Parent" required onchange="toggleSchoolDropdown()">
                    <label for="parent">Parent</label>
                </div>
            </div>
            <br>
            <label for="school" id="schoolLabel" style="display:none;">School:</label>
            <select id="school" name="school" required style="display:none;">
                <option value="Shree Aruni School - Sanathali">Shree Aruni School - Sanathali</option>
                <option value="લોન કોટડા પ્રાથમિક શાળા">લોન કોટડા પ્રાથમિક શાળા</option>
                <option value="થોરખાણ પ્રાથમિક શાળા">થોરખાણ પ્રાથમિક શાળા</option>
                <option value="જીવાપર પ્રાથમિક શાળા">જીવાપર પ્રાથમિક શાળા</option>
                <option value="નવાગામ પ્રાથમિક શાળા">નવાગામ પ્રાથમિક શાળા</option>
                <option value="ડોડીયાળા પ્રાથમિક શાળા">ડોડીયાળા પ્રાથમિક શાળા</option>
                <option value="મેઘપર પ્રાથમિક શાળા">મેઘપર પ્રાથમિક શાળા</option>
                <option value="દોલતપર પ્રાથમિક શાળા">દોલતપર પ્રાથમિક શાળા</option>
                <option value="વેરાવળ પ્રાથમિક શાળા">વેરાવળ પ્રાથમિક શાળા</option>
                <option value="ગરણી પ્રાથમિક શાળા">ગરણી પ્રાથમિક શાળા</option>
                <option value="જનતા વિદ્યાલય - થોરખાણ">જનતા વિદ્યાલય - થોરખાણ</option>
                <option value="સાણથલી પ્રાથમિક શાળા">સાણથલી પ્રાથમિક શાળા</option>
                <option value="આદર્શ સ્કુલ - ડોડીયાળા">આદર્શ સ્કુલ - ડોડીયાળા</option>
                <option value="સરદાર સ્કુલ સાણથલી">સરદાર સ્કુલ સાણથલી</option>
                <option value="GPS હાઈસ્કુલ સાણથલી">GPS હાઈસ્કુલ સાણથલી</option>
                <option value="other">Other</option>
            </select>
            <input type="text" id="otherSchool" name="otherSchool" placeholder="Enter school name" style="display:none;">
            <br>
            <label for="mobile">Mobile:</label>
            <input type="text" id="mobile" name="mobile" required autocomplete="off">
            <br>
            <button type="submit">Register</button>
        </form>
    </div>
    <footer>Developed by @Elvin-Khunt</footer>
</div>

<script>
    function openWhatsApp(mobile, name) {
        var whatsappNumber = mobile;
        var name = name;
        var whatsappLink = 'https://wa.me/91'+whatsappNumber+'?text=નમસ્કાર '+name+'! *જ્ઞાનોત્સવ-2024* માં મુલાકાત લેવા બદલ આભાર… શ્રી આરૂણી શૈક્ષણિક સંકુલ - સાણથલી આપનું હાર્દિક સ્વાગત કરે છે.';
        console.log(whatsappLink);
        window.open(whatsappLink, '_blank');
    }

    function toggleSchoolDropdown() {
        var studentRadioButton = document.getElementById('student');
        var schoolLabel = document.getElementById('schoolLabel');
        var schoolDropdown = document.getElementById('school');
        var otherSchoolInput = document.getElementById('otherSchool');

        if (studentRadioButton.checked) {
            schoolLabel.style.display = 'block';
            schoolDropdown.style.display = 'block';
        } else {
            schoolLabel.style.display = 'none';
            schoolDropdown.style.display = 'none';
        }
         if (schoolDropdown.value === 'other') {
            otherSchoolInput.style.display = 'block';
        } else {
            otherSchoolInput.style.display = 'none';
        }
    }

    // Modify the form submission logic to handle manual entry
    document.querySelector('form').addEventListener('submit', function (event) {
        var studentRadioButton = document.getElementById('student');
        var schoolDropdown = document.getElementById('school');
        var otherSchoolInput = document.getElementById('otherSchool');

        if (studentRadioButton.checked && schoolDropdown.value === 'other') {
            // Use the manually entered school name
            schoolDropdown.value = otherSchoolInput.value;
        }
        // Continue with the form submission logic
    });
</script>
